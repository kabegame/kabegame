# Windows åº”ç”¨æ‰“åŒ…æŒ‡å—

## ğŸ“‹ æ‰“åŒ…å‰æ£€æŸ¥æ¸…å•

### 1. å›¾æ ‡æ–‡ä»¶ âœ…
- âœ… `icons/icon.ico` - Windows åº”ç”¨å›¾æ ‡ï¼ˆå·²é…ç½®ï¼‰
- å¦‚éœ€ç”Ÿæˆå®Œæ•´å›¾æ ‡é›†ï¼Œå¯è¿è¡Œï¼š
  ```bash
  tauri icon path/to/your/icon.png
  ```

### 2. é…ç½®æ–‡ä»¶ âœ…
- âœ… `tauri.conf.json` å·²é…ç½® Windows æ‰“åŒ…é€‰é¡¹
- âœ… å·²è®¾ç½®æ‰“åŒ…ç›®æ ‡ä¸º `msi` å’Œ `nsis`
- âœ… å·²é…ç½®ä¸­æ–‡è¯­è¨€æ”¯æŒ

### 3. æ„å»ºå‘½ä»¤
```bash
# å®Œæ•´æ„å»ºæµç¨‹
pnpm tauri:build
```

è¿™ä¼šè‡ªåŠ¨æ‰§è¡Œï¼š
1. `pnpm build` - æ„å»ºå‰ç«¯ Vue åº”ç”¨
2. ç¼–è¯‘ Rust åç«¯ä»£ç 
3. ç”Ÿæˆ Windows å®‰è£…åŒ…ï¼ˆMSI å’Œ NSISï¼‰

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. ä»£ç ç­¾åï¼ˆå¯é€‰ä½†æ¨èï¼‰

**æœªç­¾åçš„åº”ç”¨ä¼šæœ‰ä»¥ä¸‹é—®é¢˜ï¼š**
- Windows Defender SmartScreen ä¼šæ˜¾ç¤ºè­¦å‘Š
- ç”¨æˆ·éœ€è¦ç‚¹å‡»"æ›´å¤šä¿¡æ¯" â†’ "ä»è¦è¿è¡Œ"æ‰èƒ½å®‰è£…
- å½±å“ç”¨æˆ·ä¿¡ä»»åº¦å’Œä¸“ä¸šåº¦

**è§£å†³æ–¹æ¡ˆï¼š**
1. **è´­ä¹°ä»£ç ç­¾åè¯ä¹¦**ï¼ˆæ¨èï¼‰
   - ä»å¯ä¿¡ CA è´­ä¹°ï¼ˆå¦‚ DigiCertã€Sectigoï¼‰
   - ä»·æ ¼ï¼šçº¦ $200-500/å¹´
   - é€‚ç”¨äºå•†ä¸šåº”ç”¨

2. **ä½¿ç”¨è‡ªç­¾åè¯ä¹¦**ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼‰
   ```powershell
   # ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
   New-SelfSignedCertificate -Type CodeSigningCert -Subject "CN=Kabegame" -CertStoreLocation Cert:\CurrentUser\My
   
   # åœ¨ tauri.conf.json ä¸­é…ç½®è¯ä¹¦æŒ‡çº¹
   # "certificateThumbprint": "ä½ çš„è¯ä¹¦æŒ‡çº¹"
   ```

3. **ä½¿ç”¨ Microsoft Store**ï¼ˆæ¨èï¼‰
   - é€šè¿‡ Microsoft Store åˆ†å‘ï¼Œæ— éœ€ä»£ç ç­¾å
   - è‡ªåŠ¨å¤„ç†æ›´æ–°å’Œåˆ†å‘

### 2. Windows WebView2 è¿è¡Œæ—¶

**Tauri 2.0 éœ€è¦ WebView2 è¿è¡Œæ—¶ï¼š**
- Windows 11ï¼šå·²å†…ç½®
- Windows 10 1909+ï¼šå¯èƒ½éœ€è¦å®‰è£…

**é…ç½®é€‰é¡¹ï¼š**
- `skipWebviewInstall: false` - å®‰è£…ç¨‹åºä¼šè‡ªåŠ¨æ£€æŸ¥å’Œå®‰è£… WebView2ï¼ˆæ¨èï¼‰
- `skipWebviewInstall: true` - è·³è¿‡ï¼Œç”¨æˆ·éœ€æ‰‹åŠ¨å®‰è£…

### 3. å®‰è£…åŒ…å¤§å°ä¼˜åŒ–

**å½“å‰é…ç½®ï¼š**
- âœ… `rusqlite` ä½¿ç”¨ `bundled` ç‰¹æ€§ï¼ˆå·²é…ç½®ï¼‰
- âœ… Rust ç¼–è¯‘ä¼˜åŒ–ï¼ˆrelease æ¨¡å¼ï¼‰

**è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®ï¼š**
- ä½¿ç”¨ UPX å‹ç¼©ï¼ˆå¯é€‰ï¼Œä½†å¯èƒ½è§¦å‘æ€æ¯’è½¯ä»¶è¯¯æŠ¥ï¼‰
- å¯ç”¨ LTOï¼ˆLink Time Optimizationï¼‰
- ä½¿ç”¨ strip ç§»é™¤è°ƒè¯•ç¬¦å·

### 4. æƒé™è¦æ±‚

**å½“å‰åº”ç”¨çš„åŠŸèƒ½å¯èƒ½éœ€è¦ï¼š**
- âœ… æ–‡ä»¶ç³»ç»Ÿè®¿é—®ï¼ˆå·²é€šè¿‡ tauri-plugin-fsï¼‰
- âœ… ç½‘ç»œè®¿é—®ï¼ˆçˆ¬è™«åŠŸèƒ½ï¼‰
- âš ï¸ å£çº¸è®¾ç½®æƒé™ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼Ÿï¼‰
- âš ï¸ ç³»ç»Ÿæ‰˜ç›˜ï¼ˆå·²é…ç½®ï¼‰

**å£çº¸åŠŸèƒ½æƒé™å¤„ç†ï¼š**
- å¦‚æœéœ€è¦åœ¨éç®¡ç†å‘˜æƒé™ä¸‹è®¾ç½®å£çº¸ï¼Œç¡®ä¿ä½¿ç”¨æ³¨å†Œè¡¨æ–¹å¼ï¼ˆå·²å®ç°ï¼‰
- æŸäº› Windows ç‰ˆæœ¬å¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™

### 5. ä¾èµ–æ£€æŸ¥

**ç¡®ä¿å®‰è£…äº†ä»¥ä¸‹å·¥å…·ï¼š**
```bash
# Rust å·¥å…·é“¾
rustc --version  # éœ€è¦ 1.70+

# Node.js å’Œ pnpm
node --version
pnpm --version

# Tauri CLI
npm list -g @tauri-apps/cli
```

**Windows ç‰¹å®šä¾èµ–ï¼š**
- WiX Toolsetï¼ˆTauri ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œæ— éœ€æ‰‹åŠ¨å®‰è£…ï¼‰
- Visual C++ Redistributableï¼ˆå·²é€šè¿‡ Tauri åŒ…å«ï¼‰

### 6. æ„å»ºç¯å¢ƒ

**æ¨èç¯å¢ƒï¼š**
- Windows 10/11ï¼ˆ64ä½ï¼‰
- è‡³å°‘ 8GB RAM
- 10GB+ å¯ç”¨ç£ç›˜ç©ºé—´

**æ„å»ºæ—¶é—´ï¼š**
- é¦–æ¬¡æ„å»ºï¼š5-15 åˆ†é’Ÿï¼ˆéœ€è¦ç¼–è¯‘ Rust ä¾èµ–ï¼‰
- åç»­æ„å»ºï¼š1-3 åˆ†é’Ÿ

### 7. è¾“å‡ºæ–‡ä»¶ä½ç½®

æ„å»ºå®Œæˆåï¼Œå®‰è£…åŒ…ä½äºï¼š
```
src-tauri/target/release/bundle/
â”œâ”€â”€ msi/
â”‚   â””â”€â”€ Kabegame_0.1.0_x64_en-US.msi
â””â”€â”€ nsis/
    â””â”€â”€ Kabegame_0.1.0_x64-setup.exe
```

### 8. æµ‹è¯•å»ºè®®

**å®‰è£…å‰æµ‹è¯•ï¼š**
1. âœ… åœ¨å¼€å‘æ¨¡å¼ä¸‹æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
2. âœ… æµ‹è¯•å®‰è£…/å¸è½½æµç¨‹
3. âœ… æµ‹è¯•åœ¨ä¸åŒ Windows ç‰ˆæœ¬ä¸Šè¿è¡Œ
4. âœ… æµ‹è¯•æƒé™è¦æ±‚ï¼ˆæ™®é€šç”¨æˆ· vs ç®¡ç†å‘˜ï¼‰

**å¸¸è§é—®é¢˜ï¼š**
- å¦‚æœå®‰è£…å¤±è´¥ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰æ€æ¯’è½¯ä»¶æ‹¦æˆª
- å¦‚æœè¿è¡Œæ—¶å´©æºƒï¼Œæ£€æŸ¥ Event Viewer ä¸­çš„é”™è¯¯æ—¥å¿—
- å¦‚æœå£çº¸åŠŸèƒ½ä¸å·¥ä½œï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„æƒé™

### 9. åˆ†å‘é€‰é¡¹

1. **ç›´æ¥åˆ†å‘**
   - æä¾› MSI æˆ– NSIS å®‰è£…åŒ…ä¸‹è½½
   - å»ºè®®åŒæ—¶æä¾›ä¸¤ä¸ªæ ¼å¼ä¾›ç”¨æˆ·é€‰æ‹©

2. **Microsoft Store**
   - éœ€è¦é€šè¿‡ Microsoft Store å®¡æ ¸
   - è‡ªåŠ¨æ›´æ–°å’Œåˆ†å‘

3. **GitHub Releases**
   - é€‚åˆå¼€æºé¡¹ç›®
   - å¯ä»¥è‡ªåŠ¨å‘å¸ƒ

### 10. é…ç½®æ–‡ä»¶è¯´æ˜

**å½“å‰é…ç½®çš„ Windows æ‰“åŒ…é€‰é¡¹ï¼š**
```json
{
  "bundle": {
    "targets": "all",  // ä¹Ÿå¯ä»¥æ”¹æˆ ["nsis"] / ["msi"]
    "windows": {
      "nsis": {
        "installerHooks": "nsis/installer-hooks.nsh" // å®‰è£…åå†™å…¥ desktop.iniï¼Œè®©å®‰è£…ç›®å½•æ˜¾ç¤ºåº”ç”¨å›¾æ ‡
      }
    }
  }
}
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. ç¡®ä¿ä¾èµ–å·²å®‰è£…
pnpm install

# 2. æ„å»ºåº”ç”¨
pnpm tauri:build

# 3. åœ¨ä»¥ä¸‹ç›®å½•æ‰¾åˆ°å®‰è£…åŒ…
# src-tauri/target/release/bundle/msi/
# src-tauri/target/release/bundle/nsis/
```

## ğŸ“ ç‰ˆæœ¬å·ç®¡ç†

æ›´æ–°ç‰ˆæœ¬å·éœ€è¦åŒæ—¶ä¿®æ”¹ï¼š
1. `package.json` - `version`
2. `src-tauri/Cargo.toml` - `version`
3. `src-tauri/app-main/tauri.conf.json` - `version`

## ğŸ”— ç›¸å…³èµ„æº

- [Tauri Windows æ‰“åŒ…æ–‡æ¡£](https://tauri.app/v1/guides/building/windows)
- [WiX Toolset æ–‡æ¡£](https://wixtoolset.org/documentation/)
- [ä»£ç ç­¾åæŒ‡å—](https://learn.microsoft.com/zh-cn/windows/security/threat-protection/windows-defender-smartscreen/microsoft-defender-smartscreen-overview)

